!function(a,b){function c(a,b){session&&session.setItem(a,JSON.stringify(b))}function d(a){try{return session&&session[a]?JSON.parse(session[a]):[]}catch(b){return[]}}function e(a){var b=this;b.key=a,b._queue=d(a)}function f(){c(C.key,C._queue),c(D.key,D._queue)}function g(a){w.hash=a}function h(){return B?w.hash.replace(/^#/g,"").trim():w.search.replace(/.*#/g,"").trim()}function i(b){var c=b||h()||"",d=[];return a.each(c.split(/&|&amp;/g),function(b,c){var e=c.split("=");d[a.decode(e[0])]=a.decode(e[1])}),d}function j(b,c,d){b=l(b);var e=z(c)?b:b[c];try{return e.apply(b,d||[])}catch(f){a.log(b),a.log(c),a.log(d)}}function k(b){var c,d,e;return a.isObject(b)?(c=b.module,d=b.method,e=b.param):(e=i(b),c=e[config.module],d=e[config.method]),c&&y.use(c,function(a){j(a,d,e||[])}),c}function l(b){return b.constructor!=A&&a.isFun(b)&&a.isFun(b.getInstance)&&(b=b.getInstance()),b}function m(){k()||z(config.defaultModule)||k(config.defaultModule)}function n(){a(u).on("hashchange",m)}function o(){a(u).un("hashchange",m,n)}function p(a){var b=a.touches?a.touches[0]:a;return G.x=b.clientX-F.x,G.y=b.clientY-F.y,Math.abs(G.y)>=config.navDiff?"Y":G.x>=config.navDiff?"-X":G.x<=-config.navDiff?"+X":null}function q(b){q.thread&&q.thread.stop(),q.thread=a.delay(function(){H=!1},b||500)}function r(a){if(!H){E=null,H=!0,q(1e3);var b=a.touches?a.touches[0]:a;F.x=b.clientX,F.y=b.clientY}}function s(b){return H&&a.likeNull(E)?(E=p(b),void 0):void 0}function t(b){if(H){switch(q(100),E&&(b.preventDefault(),b.stopPropagation()),E){case"+X":a.nav.forward();break;case"-X":a.nav.back()}E=null}}var u=a.global,v=u.document,w=location,x=a.encode,y=a.sun,z=(a.isFun,a.likeNull),A={}.constructor;session=u.sessionStorage,config={module:"module",method:"method",enableTouch:!1,navDiff:60};var B="onhashchange"in u&&(void 0===v.documentMode||v.documentMode>7);a.extend(e.prototype,{pop:function(){var a=this,b=null;return a.size()>0&&(b=a._queue[a.size()-1],a._queue.splice(a.size()-1,1)),b},push:function(a){var b=this;a&&b.get(b.size()-1)!=a&&b._queue.push(a)},get:function(a){return this._queue[a]},size:function(){return this._queue.length}});var C=new e("store_nav_goBack"),D=new e("store_nav_goForward");a(window).on({unload:f}),a(v).ready(function(){var a=h(),b=C.get(C.size()-1);a!=b&&C.push(a),m(),n()}),a.extend({nav:{use:function(b){var c=b.param||[],d=c.callback,e=b.method||"";y.use(b.module,function(f){f.constructor!=A&&a.isFun(f)&&a.isFun(f.getInstance)&&(f=f.getInstance());var h=[];h.push(x(config.module)+"="+x(b.module)),h.push(x(config.method)+"="+x(e)),a.each(c,function(a,b){h.push(x(a)+"="+x(b))});var i=h.join("&");o(),g(i),C.push(i);var k=j(f,e,c);d&&d.apply(d,[k]),a.delay(n,500)})},getInfo:function(a){var b=i();return a?b[a]:b},back:function(){if(C.size()>0){var a=C.pop();B?history.back():k(a),D.push(a)}},forward:function(){if(D.size()>0){var a=D.pop();B?history.forward():k(a),C.push(a)}},onload:function(a){z(h())&&a()},config:function(b){return a.config(b,config)}}});var E,F={x:0,y:0},G={x:0,y:0},H=!1;"true"!=a("body").attr("data-bindNav")&&a("body").on({touchstart:r,mouseover:r,mousedown:r,touchmove:s,mousemove:s,touchend:t,mouseup:t}),b(function(b,c,d){d.exports=a})}(Qmik,Qmik.define);