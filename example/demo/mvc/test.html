 <!DOCTYPE html>
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta charset="utf8" /> 
  <meta content="width=device-width,user-scalable=no,initial-scale=1.0" name="viewport" /> 
  <meta name="-webkit-tap-highlight" content="no" /> 
  <meta content="IE=10" http-equiv="x-ua-compatible" /> 
  <title>mvc例子</title> 
  <script type="text/javascript" src="../../../assets/qmik-debug.all.js"></script>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div>
    <div q-ctrl="user">xx
        <input name="user.name" type="text" value="leo"/>
        <input name="user.age" type="text" value="22"/>
        <p>
            倒计时:${time}
        </p>
        <p>
          输出: ${user.name} - ${user.age}
        </p>
    </div>
    <script type="text/javascript">
        (function($){
          //$.app() 编译页面页面,只会编译一次,后面再次调用,不会生成新值 
          //$.app().ctrl();//定义控制器
          $.app().ctrl({
            user: function(scope){//控制器user,对应 q-ctrl="user"
                scope.time = 5;
                $.cycle(function(){
                    scope.time--;
                    scope.apply("time");//更新time所在的节点值
                }, 1000);
                $.delay(function(){
                    scope.user = {
                      name: 'leochen',
                      age: 99
                    };
                    scope.apply(["user"]);
                }, 3000);
            }
          });
        })(Qmik);
    </script>
    <div class="box border1 bh" q-ctrl="list">
        <ul q-for="item in list1">
          <li> ${item.name} - ${item.age} </li>
        </ul>
        <ul q-for="item in list2">
          <li> ${item.name} - ${item.age} </li>
        </ul>
    </div>
  </div>
  <script type="text/javascript">
    //$.app() 编译并生成应用,$.app().ctrl()定义控制器
    $.app().config({
      section: 8
    }).ctrl({
      list: function(scope){//购物
          var allList = getData();
          var start = 0;
          var length = 24;
          scope.list1 = allList.slice(start, start + length);
          start += length;
          scope.apply();
          $.delay(function(){
              scope.list2 = allList.slice(start, start + length);
              scope.apply(["list2"]);
          }, 3000);
      }
    });

    function getData(){
        var allList = [];
        for(var i=0;i<200;i++){
          allList.push({
            name:"tit"+i,
            age: i+1
          });
        }
        return allList;
    }
    //
  </script>
 </body>
